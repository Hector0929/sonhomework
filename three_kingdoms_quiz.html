<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三國演義英雄榜 - 知識大會考</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Serif TC', serif;
            background-color: #f4f1ea;
            background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
        }

        .ancient-card {
            border: 2px solid #8b4513;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.1);
            background: rgba(255, 255, 255, 0.9);
        }

        .btn-choice {
            transition: all 0.2s;
            border: 1px solid #d2b48c;
        }

        .btn-choice:hover {
            background-color: #8b4513;
            color: white;
            transform: translateX(5px);
        }

        .scroll-style::-webkit-scrollbar {
            width: 8px;
        }
        .scroll-style::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .scroll-style::-webkit-scrollbar-thumb {
            background: #8b4513;
            border-radius: 4px;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4 md:p-8">

    <!-- 標題區 -->
    <header class="text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-bold text-red-900 mb-2">三國演義知識大會考</h1>
        <p class="text-gray-700">滾滾長江東逝水，浪花淘盡英雄...</p>
    </header>

    <main id="game-container" class="w-full max-w-2xl">
        <!-- 開始畫面 -->
        <div id="start-screen" class="ancient-card p-8 rounded-lg text-center">
            <h2 class="text-2xl mb-6 font-bold text-brown-800">準備好接受挑戰了嗎？</h2>
            <p class="mb-8 text-gray-600">本題庫包含 200 道精選考題，答題過程中可隨時停止結算。</p>
            <button onclick="startQuiz()" class="bg-red-800 text-white px-8 py-3 rounded-full text-xl hover:bg-red-900 shadow-lg">
                開始挑戰
            </button>
        </div>

        <!-- 答題畫面 -->
        <div id="quiz-screen" class="hidden ancient-card p-6 md:p-8 rounded-lg">
            <div class="flex justify-between items-center mb-6 border-b border-brown-200 pb-2">
                <span id="question-count" class="text-sm font-bold text-brown-600">已答: 0</span>
                <span id="current-score" class="text-sm font-bold text-green-700">正確率: 0%</span>
                <button onclick="stopQuiz()" class="text-sm bg-gray-200 px-3 py-1 rounded hover:bg-gray-300">結束並結算</button>
            </div>
            
            <div class="mb-8">
                <h3 id="question-text" class="text-xl md:text-2xl font-bold text-gray-800 leading-relaxed">題目加載中...</h3>
            </div>

            <div id="choices-container" class="space-y-4">
                <!-- 選項會動態注入 -->
            </div>
        </div>

        <!-- 結果畫面 -->
        <div id="result-screen" class="hidden ancient-card p-6 md:p-8 rounded-lg">
            <h2 class="text-3xl font-bold text-center text-red-900 mb-4">測試結果報告</h2>
            <div id="summary-stats" class="grid grid-cols-2 gap-4 mb-8 text-center border-y py-4 border-brown-200">
                <!-- 統計數據 -->
            </div>

            <div class="mb-4">
                <h3 class="font-bold text-lg mb-2 text-red-800">錯題回顧：</h3>
                <div id="wrong-answers-list" class="max-h-64 overflow-y-auto scroll-style space-y-4 pr-2">
                    <!-- 錯題清單 -->
                </div>
            </div>

            <button onclick="location.reload()" class="w-full bg-brown-700 text-white py-3 rounded-lg mt-4 hover:bg-brown-800">
                重新挑戰
            </button>
        </div>
    </main>

    <script>
        // 完整 200 題三國知識題庫
        const questionPool = [
            // 1-20: 基礎人物與事件
            { q: "《三國演義》中，被稱為「臥龍」的是誰？", o: ["龐統", "諸葛亮", "司馬懿", "徐庶"], a: 1, e: "諸葛亮號臥龍，龐統號鳳雛。" },
            { q: "關羽「過五關斬六將」是為了尋找誰？", o: ["劉備", "張飛", "趙雲", "諸葛亮"], a: 0, e: "關羽得知劉備在袁紹處，遂掛印封金而去。" },
            { q: "赤壁之戰中，誰獻策使用「連環計」？", o: ["諸葛亮", "周瑜", "龐統", "闞澤"], a: 2, e: "龐統向曹操獻連環計，使曹軍戰船鎖在一起。" },
            { q: "趙雲在長坂坡營救的小主是誰？", o: ["劉封", "劉禪", "劉永", "劉理"], a: 1, e: "趙雲七進七出長坂坡救出後主劉禪（阿斗）。" },
            { q: "三國中誰被稱為「亂世之奸雄」？", o: ["董卓", "曹操", "袁紹", "呂布"], a: 1, e: "許劭評價曹操為「治世之能臣，亂世之奸雄」。" },
            { q: "桃園三結義的順序是？", o: ["關張劉", "劉張關", "劉關張", "關劉張"], a: 2, e: "長幼順序為劉備為兄，關羽次之，張飛最幼。" },
            { q: "誰在長坂橋大喝一聲，嚇退曹操大軍？", o: ["趙雲", "張飛", "關羽", "馬超"], a: 1, e: "張飛據水斷橋，一聲大喝驚死夏侯傑。" },
            { q: "「萬事俱備，只欠東風」是形容哪場戰役？", o: ["官渡之戰", "赤壁之戰", "彝陵之戰", "襄樊之戰"], a: 1, e: "諸葛亮在赤壁之戰借東風以助火攻。" },
            { q: "曹操「割髮代首」是因為違反了什麼規定？", o: ["軍隊不得踐踏莊稼", "不得延誤軍機", "不得酗酒", "不得擅離職守"], a: 0, e: "曹操下令軍士不得踐踏麥田，結果自己的馬受驚入田，他遂割髮自罰。" },
            { q: "劉備三顧茅廬時，前兩次見到的是誰？", o: ["諸葛亮的朋友", "諸葛亮的弟弟", "諸葛亮的書僮", "以上皆是"], a: 3, e: "劉備前幾次拜訪遇到了崔州平、諸葛均及書僮等人。" },
            { q: "「既生瑜，何生亮」是誰臨終前說的？", o: ["周瑜", "諸葛瑾", "魯肅", "呂蒙"], a: 0, e: "周瑜因妒忌諸葛亮才智，臨終前發出此感嘆。" },
            { q: "劉備建立的國家國號是？", o: ["蜀", "漢", "西蜀", "蜀漢"], a: 1, e: "劉備自稱漢室宗親，國號為漢，後世稱蜀漢。" },
            { q: "「空城計」是諸葛亮用來對付誰？", o: ["曹操", "司馬懿", "曹丕", "曹真"], a: 1, e: "諸葛亮在西城用空城計嚇退司馬懿大軍。" },
            { q: "「煮酒論英雄」的兩位主角是？", o: ["曹操和劉備", "劉備和孫權", "曹操和袁紹", "劉備和諸葛亮"], a: 0, e: "曹操在許都與劉備煮酒論天下英雄。" },
            { q: "關羽的兵器叫什麼？", o: ["青龍偃月刀", "方天畫戟", "丈八蛇矛", "雙股劍"], a: 0, e: "關羽使用青龍偃月刀，重達八十二斤。" },
            { q: "呂布的義父是誰？", o: ["丁原", "董卓", "兩者都是", "張楊"], a: 2, e: "呂布先認丁原為義父，後又認董卓為義父。" },
            { q: "「白帝城托孤」劉備將兒子託付給誰？", o: ["關羽", "趙雲", "諸葛亮", "張飛"], a: 2, e: "劉備臨終前在白帝城將劉禪託付給諸葛亮。" },
            { q: "「草船借箭」中諸葛亮借了多少支箭？", o: ["一萬支", "五萬支", "十萬支", "二十萬支"], a: 2, e: "諸葛亮與周瑜約定三日內造十萬支箭。" },
            { q: "「火燒赤壁」主要是燒毀誰的水軍？", o: ["曹操", "孫權", "劉備", "袁紹"], a: 0, e: "赤壁之戰孫劉聯軍火燒曹操水軍。" },
            { q: "「單刀赴會」的主角是誰？", o: ["張飛", "趙雲", "關羽", "劉備"], a: 2, e: "關羽單刀赴會赴東吳的鴻門宴。" },
            
            // 21-40: 戰役與謀略
            { q: "官渡之戰中，曹操擊敗的是誰？", o: ["劉備", "孫策", "袁紹", "呂布"], a: 2, e: "官渡之戰曹操以少勝多擊敗袁紹。" },
            { q: "夷陵之戰中，劉備被誰擊敗？", o: ["陸遜", "周瑜", "呂蒙", "孫權"], a: 0, e: "陸遜火燒連營七百里，大敗劉備。" },
            { q: "「七擒七縱」是諸葛亮對付哪位南蠻王？", o: ["孟獲", "兀突骨", "祝融夫人", "朵思大王"], a: 0, e: "諸葛亮七擒七縱孟獲，最終收服南蠻。" },
            { q: "「舌戰群儒」的主角是誰？", o: ["諸葛亮", "魯肅", "周瑜", "張昭"], a: 0, e: "諸葛亮在東吳舌戰群儒，說服孫權抗曹。" },
            { q: "「苦肉計」是誰獻的計策？", o: ["周瑜", "黃蓋", "闞澤", "諸葛亮"], a: 1, e: "黃蓋願受苦肉計詐降曹操。" },
            { q: "「借東風」發生在哪個季節？", o: ["春天", "夏天", "秋天", "冬天"], a: 3, e: "赤壁之戰在冬季，諸葛亮借東南風。" },
            { q: "「火燒新野」是誰的計策？", o: ["諸葛亮", "徐庶", "龐統", "劉備"], a: 0, e: "諸葛亮出山後首次用兵，火燒新野。" },
            { q: "「水淹七軍」中被淹的是誰的軍隊？", o: ["曹仁", "于禁", "曹洪", "夏侯惇"], a: 1, e: "關羽水淹七軍，于禁投降，龐德被殺。" },
            { q: "「轅門射戟」的主角是誰？", o: ["趙雲", "關羽", "呂布", "黃忠"], a: 2, e: "呂布轅門射戟解劉備與袁術之圍。" },
            { q: "「定軍山之戰」中黃忠斬殺的是誰？", o: ["夏侯淵", "夏侯惇", "曹洪", "曹真"], a: 0, e: "黃忠在定軍山斬殺曹操大將夏侯淵。" },
            { q: "「街亭失守」是誰失職導致的？", o: ["魏延", "馬謖", "王平", "高翔"], a: 1, e: "馬謖違反諸葛亮軍令，導致街亭失守。" },
            { q: "「斬馬謖」是誰下的命令？", o: ["劉備", "劉禪", "諸葛亮", "蔣琬"], a: 2, e: "諸葛亮揮淚斬馬謖，以正軍紀。" },
            { q: "「舌戰群儒」發生在哪裡？", o: ["赤壁", "柴桑", "江東", "許都"], a: 1, e: "諸葛亮在柴桑（今江西九江）舌戰群儒。" },
            { q: "「蔣幹盜書」中的書信是誰偽造的？", o: ["諸葛亮", "周瑜", "魯肅", "龐統"], a: 1, e: "周瑜設計讓蔣幹盜取偽造的書信。" },
            { q: "「三氣周瑜」後，周瑜說了什麼？", o: ["既生瑜何生亮", "大事不妙", "吾命休矣", "天亡我也"], a: 0, e: "周瑜被諸葛亮氣死前說「既生瑜何生亮」。" },
            { q: "「失街亭」後諸葛亮用了什麼計策退敵？", o: ["空城計", "反間計", "美人計", "連環計"], a: 0, e: "街亭失守後諸葛亮用空城計退司馬懿。" },
            { q: "「火燒博望坡」是誰的首次出戰？", o: ["劉備", "諸葛亮", "關羽", "徐庶"], a: 1, e: "諸葛亮初出茅廬火燒博望坡。" },
            { q: "「六出祁山」是誰的軍事行動？", o: ["劉備", "諸葛亮", "姜維", "魏延"], a: 1, e: "諸葛亮六出祁山北伐中原。" },
            { q: "「木牛流馬」是誰發明的？", o: ["諸葛亮", "馬鈞", "黃月英", "魯班"], a: 0, e: "諸葛亮發明木牛流馬運送糧草。" },
            { q: "「司馬昭之心，路人皆知」源自誰的評論？", o: ["曹操", "曹丕", "曹髦", "劉禪"], a: 2, e: "魏帝曹髦說「司馬昭之心路人皆知」。" },
            
            // 41-60: 武將與謀士
            { q: "「五虎上將」不包括誰？", o: ["魏延", "關羽", "張飛", "馬超"], a: 0, e: "五虎上將為關羽、張飛、趙雲、馬超、黃忠。" },
            { q: "「龐統」的綽號是？", o: ["臥龍", "鳳雛", "水鏡", "伏龍"], a: 1, e: "龐統號鳳雛，與臥龍諸葛亮齊名。" },
            { q: "「徐庶」為何離開劉備？", o: ["母親被擄", "不受重用", "投靠曹操", "病逝"], a: 0, e: "徐庶母親被曹操擄走，被迫離開劉備。" },
            { q: "「司馬懿」最終建立了哪個朝代？", o: ["魏", "晉", "宋", "齊"], a: 1, e: "司馬懿之孫司馬炎建立晉朝。" },
            { q: "「許褚」被稱為？", o: ["虎癡", "虎痴", "猛虎", "惡來"], a: 1, e: "許褚綽號虎痴，是曹操的護衛猛將。" },
            { q: "「典韋」為保護誰而戰死？", o: ["曹操", "曹丕", "曹彰", "曹植"], a: 0, e: "典韋在宛城為保護曹操而戰死。" },
            { q: "「張遼」在哪場戰役中威震逍遙津？", o: ["合肥之戰", "濡須之戰", "赤壁之戰", "夷陵之戰"], a: 0, e: "張遼在合肥之戰威震逍遙津，嚇退孫權。" },
            { q: "「太史慈」效忠於哪個勢力？", o: ["曹操", "孫權", "劉備", "袁紹"], a: 1, e: "太史慈投靠孫策，後效忠孫權。" },
            { q: "「甘寧」的綽號是？", o: ["錦帆賊", "江東猛虎", "小霸王", "神威將軍"], a: 0, e: "甘寧年少時為錦帆賊，後投靠孫權。" },
            { q: "「黃忠」在多少歲時仍勇猛善戰？", o: ["五十多歲", "六十多歲", "七十多歲", "八十多歲"], a: 2, e: "黃忠七十多歲仍勇猛，斬殺夏侯淵。" },
            { q: "「魏延」提出的計策是？", o: ["子午谷奇謀", "火燒赤壁", "空城計", "連環計"], a: 0, e: "魏延提出子午谷奇謀，但未被諸葛亮採納。" },
            { q: "「姜維」是誰的徒弟？", o: ["司馬懿", "諸葛亮", "鍾會", "鄧艾"], a: 1, e: "姜維原為魏將，後拜諸葛亮為師。" },
            { q: "「周泰」身上有多少處傷疤？", o: ["十二處", "數十處", "一百多處", "無數"], a: 1, e: "周泰身上有數十處傷疤，孫權為之動容。" },
            { q: "「陸遜」在夷陵之戰時多少歲？", o: ["二十多歲", "三十多歲", "四十多歲", "五十多歲"], a: 1, e: "陸遜年僅三十多歲就統帥東吳大軍。" },
            { q: "「龐德」為誰效力時被關羽擒殺？", o: ["馬超", "曹操", "張魯", "韓遂"], a: 1, e: "龐德降曹後被關羽水淹七軍時擒殺。" },
            { q: "「文鴦」曾嚇退誰的大軍？", o: ["諸葛亮", "司馬師", "司馬昭", "鍾會"], a: 1, e: "文鴦單騎嚇退司馬師數萬大軍。" },
            { q: "「夏侯惇」失去了哪隻眼睛？", o: ["左眼", "右眼", "雙眼", "沒有失明"], a: 0, e: "夏侯惇左眼中箭，拔箭時連眼珠拔出。" },
            { q: "「張郃」最終被誰射殺？", o: ["趙雲", "魏延", "馬岱", "姜維"], a: 1, e: "張郃追擊諸葛亮時被魏延射殺。" },
            { q: "「鄧艾」用什麼方式攻入成都？", o: ["陰平道偷渡", "正面攻打", "水路進攻", "詐降"], a: 0, e: "鄧艾偷渡陰平，奇襲成都。" },
            { q: "「鍾會」最終的下場是？", o: ["病死", "戰死", "叛亂被殺", "壽終正寢"], a: 2, e: "鍾會企圖叛亂，被部下所殺。" },
            
            // 61-80: 人物關係與家族
            { q: "曹操有多少個兒子？", o: ["十幾個", "二十幾個", "三十幾個", "四十幾個"], a: 1, e: "曹操有二十五個兒子。" },
            { q: "劉備的兩位夫人是誰？", o: ["糜夫人和甘夫人", "甘夫人和孫夫人", "孫夫人和糜夫人", "以上都是"], a: 3, e: "劉備有甘夫人、糜夫人、孫夫人等多位夫人。" },
            { q: "孫權的父親是誰？", o: ["孫堅", "孫策", "孫翊", "孫靜"], a: 0, e: "孫權之父為孫堅，兄長為孫策。" },
            { q: "諸葛亮的妻子是誰？", o: ["黃月英", "黃氏", "阿醜", "以上都是"], a: 3, e: "諸葛亮妻子為黃月英，又稱黃氏、阿醜。" },
            { q: "關羽的兒子是誰？", o: ["關平", "關興", "兩者都是", "關索"], a: 2, e: "關羽有養子關平和親子關興。" },
            { q: "張飛的女兒後來成為誰的皇后？", o: ["劉禪", "劉備", "劉永", "劉理"], a: 0, e: "張飛兩個女兒先後成為劉禪的皇后。" },
            { q: "趙雲的字是？", o: ["子龍", "翼德", "雲長", "益德"], a: 0, e: "趙雲字子龍，常山真定人。" },
            { q: "馬超的父親是誰？", o: ["馬騰", "馬岱", "馬休", "馬鐵"], a: 0, e: "馬超之父為馬騰，被曹操所殺。" },
            { q: "「臥龍鳳雛，得一可安天下」是誰說的？", o: ["司馬徽", "徐庶", "劉備", "水鏡先生"], a: 0, e: "司馬徽（水鏡先生）說此話。" },
            { q: "諸葛亮的哥哥諸葛瑾效力於？", o: ["劉備", "曹操", "孫權", "袁紹"], a: 2, e: "諸葛瑾效力於孫權，與弟弟各為其主。" },
            { q: "周瑜的妻子是誰？", o: ["小喬", "大喬", "貂蟬", "孫夫人"], a: 0, e: "周瑜娶小喬為妻，孫策娶大喬。" },
            { q: "曹丕的弟弟中最有才華的是？", o: ["曹植", "曹彰", "曹熊", "曹沖"], a: 0, e: "曹植才華橫溢，有「才高八斗」之稱。" },
            { q: "「曹沖稱象」中的曹沖幾歲病逝？", o: ["八歲", "十三歲", "十八歲", "二十三歲"], a: 1, e: "曹沖十三歲病逝，曹操哀痛不已。" },
            { q: "孫策被誰的門客所刺殺？", o: ["許貢", "嚴白虎", "劉繇", "太史慈"], a: 0, e: "孫策殺許貢後被其門客刺傷致死。" },
            { q: "劉禪的小名是？", o: ["阿斗", "阿蒙", "阿豆", "阿福"], a: 0, e: "劉禪小名阿斗，成語「扶不起的阿斗」。" },
            { q: "關羽的綽號不包括？", o: ["美髯公", "關公", "武聖", "常山趙子龍"], a: 3, e: "常山趙子龍是趙雲，關羽稱美髯公、武聖。" },
            { q: "張飛的字是？", o: ["翼德", "益德", "兩者都對", "長坂"], a: 2, e: "張飛字翼德，《三國志》作益德。" },
            { q: "呂布的女兒後來嫁給誰？", o: ["袁術之子", "曹操之子", "無人", "未提及"], a: 0, e: "呂布曾想把女兒嫁給袁術之子。" },
            { q: "貂蟬最終的結局是？", o: ["隨呂布而死", "被曹操收留", "出家為尼", "小說未提"], a: 3, e: "《三國演義》未交代貂蟬最終結局。" },
            { q: "諸葛亮的兒子是誰？", o: ["諸葛瞻", "諸葛瑾", "諸葛恪", "諸葛誕"], a: 0, e: "諸葛瞻是諸葛亮之子，在綿竹戰死。" },
            
            // 81-100: 歷史事件與細節
            { q: "《三國演義》開篇詞「滾滾長江東逝水」是誰寫的？", o: ["羅貫中", "楊慎", "毛宗崗", "李漁"], a: 1, e: "開篇詞《臨江仙》為明代楊慎所作。" },
            { q: "黃巾起義的領袖是誰？", o: ["張角", "張寶", "張梁", "張魯"], a: 0, e: "張角領導黃巾起義，自稱天公將軍。" },
            { q: "董卓被誰刺殺？", o: ["曹操", "呂布", "王允", "貂蟬"], a: 1, e: "呂布在王允的連環計下刺殺董卓。" },
            { q: "「十八路諸侯討董卓」的盟主是誰？", o: ["曹操", "袁紹", "袁術", "劉備"], a: 1, e: "袁紹為十八路諸侯討董卓的盟主。" },
            { q: "「虎牢關三英戰呂布」中的三英是？", o: ["劉關張", "曹操關羽趙雲", "孫策太史慈周泰", "以上都不是"], a: 0, e: "三英為劉備、關羽、張飛。" },
            { q: "曹操「挾天子以令諸侯」迎的是哪位皇帝？", o: ["漢獻帝", "漢靈帝", "漢少帝", "漢懷帝"], a: 0, e: "曹操迎漢獻帝劉協至許都。" },
            { q: "「衣帶詔」事件中參與的是？", o: ["董承等人", "荀彧", "程昱", "郭嘉"], a: 0, e: "漢獻帝以衣帶詔密令董承等人除曹操。" },
            { q: "關羽「刮骨療毒」時在做什麼？", o: ["下棋", "飲酒", "讀書", "閒談"], a: 0, e: "關羽刮骨療毒時與馬良下棋，談笑自若。" },
            { q: "「建安七子」不包括誰？", o: ["曹植", "孔融", "陳琳", "王粲"], a: 0, e: "建安七子為孔融、陳琳、王粲等，不含曹植。" },
            { q: "赤壁之戰大約發生在哪一年？", o: ["公元208年", "公元200年", "公元220年", "公元184年"], a: 0, e: "赤壁之戰發生在建安十三年（208年）。" },
            { q: "關羽敗走麥城後被誰所殺？", o: ["呂蒙", "潘璋", "馬忠", "孫權"], a: 2, e: "關羽被潘璋部將馬忠所擒，後遭殺害。" },
            { q: "劉備稱帝時的年號是？", o: ["章武", "建安", "延康", "黃初"], a: 0, e: "劉備稱帝後改元章武。" },
            { q: "諸葛亮《出師表》是寫給誰的？", o: ["劉備", "劉禪", "劉封", "劉永"], a: 1, e: "諸葛亮寫《出師表》勸諫後主劉禪。" },
            { q: "諸葛亮北伐共進行了幾次？", o: ["三次", "五次", "六次", "九次"], a: 2, e: "諸葛亮六出祁山北伐中原。" },
            { q: "諸葛亮去世於哪裡？", o: ["五丈原", "祁山", "劍閣", "成都"], a: 0, e: "諸葛亮病逝於五丈原軍中。" },
            { q: "「樂不思蜀」的主角是誰？", o: ["劉備", "劉禪", "劉封", "劉理"], a: 1, e: "劉禪在洛陽說「此間樂，不思蜀」。" },
            { q: "蜀漢最後被誰所滅？", o: ["曹操", "司馬懿", "鄧艾", "鍾會"], a: 2, e: "鄧艾偷渡陰平，劉禪投降，蜀漢滅亡。" },
            { q: "東吳被誰所滅？", o: ["魏國", "晉國", "蜀國", "未滅"], a: 1, e: "西晉統一三國，東吳最後滅亡。" },
            { q: "三國歸晉是在哪一年？", o: ["公元263年", "公元265年", "公元280年", "公元220年"], a: 2, e: "公元280年晉滅吳，三國歸晉。" },
            { q: "《三國演義》的作者是誰？", o: ["羅貫中", "施耐庵", "吳承恩", "曹雪芹"], a: 0, e: "《三國演義》作者為元末明初的羅貫中。" },
            
            // 101-120: 名言與典故
            { q: "「鞠躬盡瘁，死而後已」出自？", o: ["《出師表》", "《隆中對》", "《誡子書》", "《後出師表》"], a: 3, e: "此句出自諸葛亮《後出師表》。" },
            { q: "「治世之能臣，亂世之奸雄」評價的是誰？", o: ["曹操", "司馬懿", "董卓", "呂布"], a: 0, e: "許劭評價曹操為治世之能臣，亂世之奸雄。" },
            { q: "「子治世之能臣，亂世之奸雄也」是誰對曹操說的？", o: ["荀彧", "許劭", "郭嘉", "程昱"], a: 1, e: "許劭評價年輕的曹操。" },
            { q: "「天下英雄，唯使君與操耳」是誰說的？", o: ["曹操", "劉備", "袁紹", "孫權"], a: 0, e: "曹操在青梅煮酒時對劉備說此話。" },
            { q: "「吾雖有功於社稷，必損壽矣」是誰的感嘆？", o: ["曹操", "司馬懿", "周瑜", "諸葛亮"], a: 1, e: "司馬懿用計多端，自認損壽。" },
            { q: "「寧教我負天下人，休教天下人負我」是誰說的？", o: ["曹操", "董卓", "呂布", "袁術"], a: 0, e: "曹操殺呂伯奢一家後說此話。" },
            { q: "「生子當如孫仲謀」是誰的評價？", o: ["劉備", "曹操", "周瑜", "諸葛亮"], a: 1, e: "曹操讚嘆孫權「生子當如孫仲謀」。" },
            { q: "「臥龍鳳雛，得一可安天下」誰是鳳雛？", o: ["龐統", "徐庶", "司馬懿", "郭嘉"], a: 0, e: "鳳雛指龐統，與臥龍諸葛亮齊名。" },
            { q: "「既生瑜，何生亮」體現了什麼情感？", o: ["欽佩", "嫉妒", "恐懼", "憤怒"], a: 1, e: "周瑜嫉妒諸葛亮的才智。" },
            { q: "「桃園結義」歃血為盟時發誓的是？", o: ["同年同月生", "同年同月死", "永不背叛", "患難與共"], a: 1, e: "三人發誓不求同年同月生，但求同年同月死。" },
            { q: "「天下大勢，分久必合，合久必分」出自哪裡？", o: ["開篇詞", "第一回", "結尾", "隆中對"], a: 1, e: "此句出自《三國演義》第一回。" },
            { q: "「非淡泊無以明志，非寧靜無以致遠」是誰說的？", o: ["劉備", "諸葛亮", "龐統", "司馬懿"], a: 1, e: "諸葛亮在《誡子書》中說此話。" },
            { q: "「寧可無一不可無雙」評價的是誰？", o: ["趙雲", "關羽", "張飛", "呂布"], a: 0, e: "此話讚揚趙雲，意為有他無敵手。" },
            { q: "「人中呂布，馬中赤兔」說明什麼？", o: ["呂布武藝高強", "赤兔馬珍貴", "兩者都是", "呂布善騎術"], a: 2, e: "讚揚呂布武藝天下第一，赤兔馬神駿。" },
            { q: "「馬氏五常，白眉最良」中的白眉是誰？", o: ["馬良", "馬謖", "馬騰", "馬超"], a: 0, e: "馬良眉中有白毛，兄弟中最優秀。" },
            { q: "「千里走單騎」說的是誰？", o: ["關羽", "趙雲", "張飛", "劉備"], a: 0, e: "關羽千里走單騎尋找劉備。" },
            { q: "「身在曹營心在漢」形容誰？", o: ["關羽", "徐庶", "兩者都是", "劉備"], a: 2, e: "關羽和徐庶雖在曹營，心向劉備。" },
            { q: "「大丈夫生於天地間，豈能鬱鬱久居人下」是誰說的？", o: ["劉備", "呂布", "關羽", "張飛"], a: 1, e: "呂布在下邳時說此豪言。" },
            { q: "「吾手中寶刀不老」是誰的豪言？", o: ["關羽", "黃忠", "趙雲", "張飛"], a: 1, e: "黃忠雖年老但仍勇猛善戰。" },
            { q: "「子龍一身都是膽」是誰評價趙雲的？", o: ["劉備", "諸葛亮", "關羽", "張飛"], a: 0, e: "劉備讚揚趙雲膽識過人。" },
            
            // 121-140: 地理與地名
            { q: "「隆中對」發生在哪裡？", o: ["襄陽隆中", "南陽", "新野", "許昌"], a: 0, e: "諸葛亮在襄陽隆中為劉備規劃天下。" },
            { q: "劉備建都在哪裡？", o: ["許昌", "洛陽", "成都", "南陽"], a: 2, e: "劉備在成都建立蜀漢政權。" },
            { q: "曹操的都城在哪裡？", o: ["許昌", "洛陽", "鄴城", "長安"], a: 0, e: "曹操迎獻帝定都許昌。" },
            { q: "孫權後來遷都到哪裡？", o: ["建業", "吳郡", "會稽", "柴桑"], a: 0, e: "孫權遷都建業（今南京）。" },
            { q: "赤壁位於今天的哪個省？", o: ["湖南", "湖北", "江西", "安徽"], a: 1, e: "赤壁位於今湖北省。" },
            { q: "「荊州」在三國時期屬於誰？", o: ["曾屬劉備後歸孫權", "一直屬曹操", "一直屬劉備", "獨立勢力"], a: 0, e: "荊州先屬劉表，後歸劉備，最終被孫權奪取。" },
            { q: "「漢中」對蜀漢的重要性是？", o: ["糧倉", "北伐基地", "都城", "無關緊要"], a: 1, e: "漢中是蜀漢北伐的前沿基地。" },
            { q: "「祁山」位於今天的哪個省？", o: ["四川", "陝西", "甘肅", "青海"], a: 2, e: "祁山位於今甘肅省。" },
            { q: "「夷陵」位於今天哪個省？", o: ["湖南", "湖北", "四川", "貴州"], a: 1, e: "夷陵（今宜昌）位於湖北省。" },
            { q: "「白帝城」位於今天的哪裡？", o: ["重慶", "四川成都", "陝西", "湖北"], a: 0, e: "白帝城位於今重慶市奉節縣。" },
            { q: "「五丈原」位於今天的哪個省？", o: ["四川", "甘肅", "陝西", "山西"], a: 2, e: "五丈原位於今陝西省寶雞市。" },
            { q: "「官渡」位於今天的哪個省？", o: ["河南", "河北", "山東", "山西"], a: 0, e: "官渡在今河南省中牟縣。" },
            { q: "「長坂坡」位於今天哪裡？", o: ["河北", "河南", "湖北", "湖南"], a: 2, e: "長坂坡位於今湖北省宜昌市。" },
            { q: "「街亭」位於今天的哪個省？", o: ["甘肅", "陝西", "四川", "青海"], a: 0, e: "街亭位於今甘肅省天水市。" },
            { q: "「合肥」在三國時期屬於哪個勢力？", o: ["魏國", "吳國", "蜀國", "中立"], a: 0, e: "合肥是魏國抵禦東吳的重要城市。" },
            { q: "「陰平」位於今天哪裡？", o: ["甘肅", "四川", "陝西", "青海"], a: 0, e: "陰平（今甘肅文縣）是鄧艾偷渡的路線。" },
            { q: "「劍閣」的地理特點是？", o: ["易守難攻", "一馬平川", "水網密布", "沙漠戈壁"], a: 0, e: "劍閣地勢險要，是蜀漢的天然屏障。" },
            { q: "「濡須」是孫權抵禦誰的防線？", o: ["劉備", "曹操", "袁術", "劉表"], a: 1, e: "濡須是東吳抵禦曹魏的重要防線。" },
            { q: "「新野」在三國時期屬於誰？", o: ["劉備", "曹操", "劉表", "以上都曾佔有"], a: 3, e: "新野先屬劉表，後歸劉備，再被曹操佔領。" },
            { q: "「襄陽」對於荊州的重要性？", o: ["首府", "軍事重鎮", "文化中心", "以上都是"], a: 3, e: "襄陽是荊州的首府和軍事文化中心。" },
            
            // 141-160: 兵器與裝備
            { q: "關羽的青龍偃月刀重多少斤？", o: ["八十二斤", "六十斤", "一百斤", "五十斤"], a: 0, e: "關羽的青龍偃月刀重八十二斤。" },
            { q: "張飛的武器是什麼？", o: ["丈八蛇矛", "方天畫戟", "青龍偃月刀", "雙股劍"], a: 0, e: "張飛使用丈八蛇矛。" },
            { q: "呂布的武器是什麼？", o: ["方天畫戟", "青龍偃月刀", "丈八蛇矛", "槍"], a: 0, e: "呂布使用方天畫戟。" },
            { q: "劉備的武器是什麼？", o: ["雙股劍", "單刀", "長槍", "大刀"], a: 0, e: "劉備使用雙股劍。" },
            { q: "趙雲的武器是什麼？", o: ["槍", "劍", "刀", "戟"], a: 0, e: "趙雲使用槍，名為亮銀槍。" },
            { q: "諸葛亮的主要工具是？", o: ["羽扇", "寶劍", "長槍", "弓箭"], a: 0, e: "諸葛亮常持羽扇，運籌帷幄。" },
            { q: "「七星寶刀」是誰送給誰的？", o: ["王允送曹操", "曹操送劉備", "劉備送關羽", "董卓送呂布"], a: 0, e: "王允送七星寶刀給曹操刺殺董卓。" },
            { q: "「倚天劍」和「青釭劍」屬於誰？", o: ["曹操", "劉備", "孫權", "呂布"], a: 0, e: "曹操有倚天劍和青釭劍兩把名劍。" },
            { q: "關羽的赤兔馬原本屬於誰？", o: ["呂布", "曹操", "董卓", "以上都曾擁有"], a: 3, e: "赤兔馬原屬董卓，後給呂布，再被曹操送給關羽。" },
            { q: "諸葛亮發明的「木牛流馬」是用來做什麼的？", o: ["運輸糧草", "戰鬥工具", "偵察敵情", "傳遞情報"], a: 0, e: "木牛流馬是運輸糧草的工具。" },
            { q: "諸葛亮的「八陣圖」是什麼？", o: ["陣法", "地圖", "兵書", "棋譜"], a: 0, e: "八陣圖是諸葛亮設計的軍事陣法。" },
            { q: "「連弩」是誰改良的武器？", o: ["諸葛亮", "馬鈞", "黃月英", "龐統"], a: 0, e: "諸葛亮改良連弩，增強殺傷力。" },
            { q: "黃忠最擅長使用什麼？", o: ["弓箭", "大刀", "長槍", "劍"], a: 0, e: "黃忠箭術高超，百步穿楊。" },
            { q: "「鐵索連船」在赤壁之戰中起了什麼作用？", o: ["使曹軍船隻無法躲避火攻", "增強防禦", "便於行軍", "提高速度"], a: 0, e: "龐統獻連環計，使曹軍船隻被鎖，無法躲避火攻。" },
            { q: "「藤甲兵」是哪個地區的特色兵種？", o: ["南蠻", "西涼", "江東", "中原"], a: 0, e: "藤甲兵是南蠻的特殊兵種，刀槍不入。" },
            { q: "諸葛亮用什麼破藤甲兵？", o: ["火攻", "水攻", "毒箭", "連弩"], a: 0, e: "諸葛亮用火攻破藤甲兵，但內心不安。" },
            { q: "「虎豹騎」是誰的精銳部隊？", o: ["曹操", "劉備", "孫權", "袁紹"], a: 0, e: "虎豹騎是曹操的精銳騎兵部隊。" },
            { q: "「白馬義從」是誰的部隊？", o: ["公孫瓚", "劉備", "趙雲", "袁紹"], a: 0, e: "白馬義從是公孫瓚的精銳騎兵。" },
            { q: "「陷陣營」是誰的部隊？", o: ["呂布", "高順", "張遼", "臧霸"], a: 1, e: "陷陣營是高順統領的精銳步兵。" },
            { q: "「無當飛軍」屬於哪個國家？", o: ["蜀漢", "曹魏", "東吳", "南蠻"], a: 0, e: "無當飛軍是蜀漢的精銳山地部隊。" },
            
            // 161-180: 計謀與智慧
            { q: "「美人計」中的美人指的是誰？", o: ["貂蟬", "大喬", "小喬", "孫尚香"], a: 0, e: "王允用貂蟬實施美人計離間董卓呂布。" },
            { q: "「離間計」使呂布殺了誰？", o: ["丁原", "董卓", "兩者都是", "張楊"], a: 2, e: "呂布先殺義父丁原，後殺董卓。" },
            { q: "「反間計」讓曹操殺了哪兩位水軍都督？", o: ["蔡瑁和張允", "蔡瑁和于禁", "張允和周瑜", "以上都不是"], a: 0, e: "周瑜用反間計使曹操殺了蔡瑁張允。" },
            { q: "「苦肉計」中誰挨了打？", o: ["黃蓋", "闞澤", "甘寧", "周泰"], a: 0, e: "黃蓋為詐降受周瑜鞭打。" },
            { q: "「連環計」的目的是？", o: ["使曹軍船隻相連無法逃脫", "增強船隻穩定性", "便於指揮", "加快速度"], a: 0, e: "龐統獻連環計讓曹操船隻相連，便於火攻。" },
            { q: "「空城計」諸葛亮在城樓上做什麼？", o: ["彈琴", "飲酒", "下棋", "讀書"], a: 0, e: "諸葛亮在城樓上悠然彈琴，嚇退司馬懿。" },
            { q: "「反客為主」是誰對付劉表的計策？", o: ["劉備", "諸葛亮", "龐統", "徐庶"], a: 1, e: "諸葛亮建議劉備奪取荊州。" },
            { q: "「借刀殺人」曹操借誰的刀殺禰衡？", o: ["劉表", "黃祖", "劉備", "袁紹"], a: 1, e: "曹操派禰衡去見劉表，最終被黃祖所殺。" },
            { q: "「欲擒故縱」諸葛亮對孟獲用了幾次？", o: ["三次", "五次", "七次", "九次"], a: 2, e: "諸葛亮七擒七縱孟獲，最終收服。" },
            { q: "「聲東擊西」在定軍山誰用此計？", o: ["黃忠", "法正", "趙雲", "諸葛亮"], a: 0, e: "黃忠用聲東擊西計斬殺夏侯淵。" },
            { q: "「瞞天過海」鄧艾用什麼方式入蜀？", o: ["偷渡陰平", "正面進攻", "水路進軍", "詐降"], a: 0, e: "鄧艾偷渡陰平，出其不意攻入成都。" },
            { q: "「以逸待勞」誰用此計大敗劉備？", o: ["陸遜", "周瑜", "呂蒙", "孫權"], a: 0, e: "陸遜以逸待勞，火燒連營七百里。" },
            { q: "「圍魏救趙」是哪個戰役的策略？", o: ["官渡之戰", "赤壁之戰", "濡須之戰", "多個戰役"], a: 3, e: "圍魏救趙是古代常用的戰略。" },
            { q: "「走為上策」劉備在什麼情況下使用？", o: ["新野撤退", "長坂坡逃亡", "夷陵戰敗", "以上都是"], a: 3, e: "劉備多次使用走為上策保存實力。" },
            { q: "「假道伐虢」曹操用此計對付誰？", o: ["袁紹", "呂布", "張繡", "多個對手"], a: 3, e: "曹操善用假道伐虢之計。" },
            { q: "「李代桃僵」關羽誰替他死？", o: ["關平", "周倉", "廖化", "未有此事"], a: 3, e: "《三國演義》中未有此情節。" },
            { q: "「指桑罵槐」禰衡用此計罵誰？", o: ["曹操", "劉表", "孔融", "荀彧"], a: 0, e: "禰衡擊鼓罵曹，實則指桑罵槐。" },
            { q: "「明修棧道，暗渡陳倉」是誰的計策？", o: ["韓信", "諸葛亮", "司馬懿", "曹操"], a: 0, e: "此計為韓信所用，在三國前。" },
            { q: "「調虎離山」周瑜用來對付誰？", o: ["曹操", "諸葛亮", "劉備", "蔣幹"], a: 0, e: "周瑜多次用計對付曹操。" },
            { q: "「釜底抽薪」曹操在哪場戰役用此計？", o: ["官渡之戰", "赤壁之戰", "漢中之戰", "多次使用"], a: 0, e: "官渡之戰曹操燒毀袁紹糧草。" },
            
            // 181-200: 其他重要知識
            { q: "《三國演義》共有多少回？", o: ["一百回", "一百二十回", "八十回", "六十回"], a: 1, e: "《三國演義》共一百二十回。" },
            { q: "「魏蜀吳」三國，誰最早稱帝？", o: ["曹操", "曹丕", "劉備", "孫權"], a: 1, e: "曹丕在220年稱帝，建立曹魏。" },
            { q: "劉備什麼時候稱帝？", o: ["220年", "221年", "222年", "223年"], a: 1, e: "劉備在221年稱帝。" },
            { q: "孫權何時稱帝？", o: ["220年", "221年", "222年", "229年"], a: 3, e: "孫權在229年稱帝，最晚稱帝。" },
            { q: "三國時期大約持續了多少年？", o: ["60年", "80年", "100年", "120年"], a: 0, e: "從220年到280年，三國時期約60年。" },
            { q: "「三絕」指的是？", o: ["智絕、義絕、奸絕", "文絕、武絕、謀絕", "勇絕、仁絕、忠絕", "以上都不是"], a: 0, e: "智絕諸葛亮、義絕關羽、奸絕曹操。" },
            { q: "「建安七子」是哪個時期的文學家？", o: ["東漢末年", "三國初期", "魏晉時期", "東漢末至三國初"], a: 3, e: "建安七子活躍於東漢末至三國初期。" },
            { q: "「竹林七賢」與三國有關嗎？", o: ["有關", "無關", "部分有關", "同一時期"], a: 2, e: "竹林七賢多生於三國末期至晉朝。" },
            { q: "曹操的詩作不包括？", o: ["《短歌行》", "《龜雖壽》", "《觀滄海》", "《春望》"], a: 3, e: "《春望》是杜甫的作品，非曹操。" },
            { q: "「對酒當歌，人生幾何」出自曹操哪首詩？", o: ["《短歌行》", "《龜雖壽》", "《觀滄海》", "《蒿里行》"], a: 0, e: "此句出自曹操《短歌行》。" },
            { q: "「老驥伏櫪，志在千里」出自哪裡？", o: ["《短歌行》", "《龜雖壽》", "《觀滄海》", "《蒿里行》"], a: 1, e: "此句出自曹操《龜雖壽》。" },
            { q: "「七步成詩」的主角是誰？", o: ["曹植", "曹丕", "曹沖", "曹操"], a: 0, e: "曹植七步成詩「煮豆燃豆萁」。" },
            { q: "「本是同根生，相煎何太急」諷刺的是？", o: ["曹丕逼迫曹植", "兄弟相殘", "手足之情", "以上都是"], a: 3, e: "曹植《七步詩》諷刺曹丕逼迫之苦。" },
            { q: "誰被稱為「書聖」與三國同時期？", o: ["王羲之", "王獻之", "鍾繇", "衛夫人"], a: 2, e: "鍾繇是三國時期的書法家。" },
            { q: "《三國演義》的體裁是？", o: ["長篇小說", "短篇小說", "史書", "詩歌"], a: 0, e: "《三國演義》是中國第一部長篇章回小說。" },
            { q: "《三國志》的作者是誰？", o: ["陳壽", "羅貫中", "司馬遷", "班固"], a: 0, e: "《三國志》是西晉陳壽編寫的史書。" },
            { q: "《三國演義》「七分實三分虛」指的是？", o: ["基於史實但有虛構", "全是虛構", "全是史實", "一半一半"], a: 0, e: "小說基於《三國志》等史書，但加入虛構情節。" },
            { q: "「三國」正式開始的標誌是？", o: ["黃巾起義", "曹丕稱帝", "劉備稱帝", "孫權稱帝"], a: 1, e: "曹丕稱帝（220年）標誌三國時代開始。" },
            { q: "三國統一後的朝代是？", o: ["隋朝", "晉朝", "南北朝", "唐朝"], a: 1, e: "司馬炎建立西晉，統一三國。" },
            { q: "下列哪個成語不出自三國？", o: ["鞠躬盡瘁", "三顧茅廬", "樂不思蜀", "臥薪嘗膽"], a: 3, e: "臥薪嘗膽出自春秋時期越王勾踐的故事。" }
        ];

        let currentQuestion = null;
        let stats = {
            totalAnswered: 0,
            correctCount: 0,
            wrongList: []
        };

        function startQuiz() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            nextQuestion();
        }

        function nextQuestion() {
            // 隨機從 200 題中抽取一題
            const randomIndex = Math.floor(Math.random() * questionPool.length);
            currentQuestion = questionPool[randomIndex];

            document.getElementById('question-text').innerText = currentQuestion.q;
            const container = document.getElementById('choices-container');
            container.innerHTML = '';

            currentQuestion.o.forEach((choice, index) => {
                const btn = document.createElement('button');
                btn.className = 'btn-choice w-full text-left p-4 rounded-lg bg-white shadow-sm font-medium';
                btn.innerText = `${String.fromCharCode(65 + index)}. ${choice}`;
                btn.onclick = () => selectAnswer(index);
                container.appendChild(btn);
            });
        }

        function selectAnswer(index) {
            stats.totalAnswered++;
            
            if (index === currentQuestion.a) {
                stats.correctCount++;
                showFeedback(true);
            } else {
                stats.wrongList.push({
                    q: currentQuestion.q,
                    userA: currentQuestion.o[index],
                    correctA: currentQuestion.o[currentQuestion.a],
                    explanation: currentQuestion.e
                });
                showFeedback(false);
            }

            updateHeaderStats();
            setTimeout(nextQuestion, 500); // 短暫延遲後進入下一題
        }

        function showFeedback(isCorrect) {
            const screen = document.getElementById('quiz-screen');
            const originalColor = screen.style.backgroundColor;
            screen.style.backgroundColor = isCorrect ? '#dcfce7' : '#fee2e2';
            setTimeout(() => {
                screen.style.backgroundColor = originalColor;
            }, 300);
        }

        function updateHeaderStats() {
            document.getElementById('question-count').innerText = `已答: ${stats.totalAnswered}`;
            const accuracy = Math.round((stats.correctCount / stats.totalAnswered) * 100);
            document.getElementById('current-score').innerText = `正確率: ${accuracy}%`;
        }

        function stopQuiz() {
            if (stats.totalAnswered === 0) {
                location.reload();
                return;
            }

            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            // 顯示統計
            const accuracy = Math.round((stats.correctCount / stats.totalAnswered) * 100);
            const statsContainer = document.getElementById('summary-stats');
            statsContainer.innerHTML = `
                <div>
                    <p class="text-gray-500 text-sm">總答題數</p>
                    <p class="text-2xl font-bold">${stats.totalAnswered}</p>
                </div>
                <div>
                    <p class="text-gray-500 text-sm">答對題數</p>
                    <p class="text-2xl font-bold text-green-600">${stats.correctCount}</p>
                </div>
                <div>
                    <p class="text-gray-500 text-sm">答錯題數</p>
                    <p class="text-2xl font-bold text-red-600">${stats.totalAnswered - stats.correctCount}</p>
                </div>
                <div>
                    <p class="text-gray-500 text-sm">總得分率</p>
                    <p class="text-2xl font-bold text-blue-600">${accuracy}%</p>
                </div>
            `;

            // 顯示錯題清單
            const wrongContainer = document.getElementById('wrong-answers-list');
            if (stats.wrongList.length === 0) {
                wrongContainer.innerHTML = '<p class="text-center text-green-600 py-4">太厲害了！全對！</p>';
            } else {
                wrongContainer.innerHTML = stats.wrongList.map((item, i) => `
                    <div class="bg-red-50 p-4 rounded border-l-4 border-red-500 shadow-sm">
                        <p class="font-bold mb-1">${i+1}. ${item.q}</p>
                        <p class="text-sm text-gray-600">你的答案：<span class="line-through">${item.userA}</span></p>
                        <p class="text-sm text-green-700 font-bold">正確答案：${item.correctA}</p>
                        <p class="text-xs text-gray-500 mt-2 bg-white p-2 rounded italic">解析：${item.explanation}</p>
                    </div>
                `).join('');
            }
        }
    </script>
</body>
</html>